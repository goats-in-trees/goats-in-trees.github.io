<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="icon" href="/assets/images/goat-logo.png">

    <title>Build a Docker image using Maven and Spring Boot | Goats in Trees</title>

    <!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Build a Docker image using Maven and Spring Boot | Goats in Trees</title>
<meta name="generator" content="Jekyll v4.0.0" />
<meta property="og:title" content="Build a Docker image using Maven and Spring Boot" />
<meta name="author" content="davelms" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="The three approaches walked through in this article are;" />
<meta property="og:description" content="The three approaches walked through in this article are;" />
<link rel="canonical" href="https://goatsintrees.net/build-a-docker-image-using-maven-and-spring-boot/" />
<meta property="og:url" content="https://goatsintrees.net/build-a-docker-image-using-maven-and-spring-boot/" />
<meta property="og:site_name" content="Goats in Trees" />
<meta property="og:image" content="https://goatsintrees.net/assets/images/build-a-docker-image-using-maven-and-spring-boot/1_RWc78aUjHJZp41lMxnFdyw.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-06-07T17:46:33+00:00" />
<script type="application/ld+json">
{"image":"https://goatsintrees.net/assets/images/build-a-docker-image-using-maven-and-spring-boot/1_RWc78aUjHJZp41lMxnFdyw.png","mainEntityOfPage":{"@type":"WebPage","@id":"https://goatsintrees.net/build-a-docker-image-using-maven-and-spring-boot/"},"@type":"BlogPosting","url":"https://goatsintrees.net/build-a-docker-image-using-maven-and-spring-boot/","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://goatsintrees.net/assets/images/goat-logo.png"},"name":"davelms"},"author":{"@type":"Person","name":"davelms"},"headline":"Build a Docker image using Maven and Spring Boot","dateModified":"2020-06-07T17:46:33+00:00","datePublished":"2020-06-07T17:46:33+00:00","description":"The three approaches walked through in this article are;","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link href="/assets/css/prism.css" rel="stylesheet">

    <link href="/assets/css/theme.css" rel="stylesheet">

    <script src="/assets/js/jquery.min.js"></script>

</head>





<body>
    <!-- defer loading of font and font awesome -->
    <noscript id="deferred-styles">
        <link href="https://fonts.googleapis.com/css?family=Sen:400,700&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css"
            integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
    </noscript>

    <!-- Begin Sidebar Navigation
================================================== -->

    <div class="sidebar">
    </div>
    <div class="nav-icon">
        <div class="hamburger-bar"></div>
    </div>
    <div id="blackover-nav" class="blackover"></div>
    <nav id="menu">
        <ul>
            <h3>Navigation</h3>
            <li><a href="/">Home</a></li>
            <li><a href="/about">About</a></li>
            <li><a href="/contact">Contact</a></li>
        </ul>
    </nav>

    <script src="/assets/js/lunr.js"></script>

<style>
    
</style>

<div class="wrap-search">
    <div class="d-flex align-items-center ml-auto">
        <i class="fas fa-search show-search"></i>
        <form class="bd-search ml-3" onSubmit="return lunr_search(document.getElementById('lunrsearch').value);">
            <input type="text" class="form-control bigradius text-small launch-modal-search" id="lunrsearch" name="q" maxlength="255" value="" placeholder="Type and enter..."/>
        </form>
    </div>
</div>

<div id="lunrsearchresults">
    <ul></ul>
</div>

<script src="/assets/js/lunrsearchengine.js"></script>


    <!-- End Sidebar Navigation
================================================== -->

    <div class="site-content ">

        <div class="container">

            <!-- Site Logo/Name
    ================================================== -->

            <a class="navbar-brand" href="/">
                <img src="/assets/images/goat-logo.png" alt="Goats in Trees">
            </a>


            <!-- Site Tag
    ================================================== -->
            

            <!-- Content
    ================================================== -->
            <div class="main-content">
                <div class="entry-header">
    <!-- Post Title -->
    <h1 class="posttitle">Build a Docker image using Maven and Spring Boot</h1>
    <!-- Author & Date  Box -->
    
    
    <div class="d-flex align-items-center mt-4">
        <div>
            
            <img class="author-thumb" src="https://www.gravatar.com/avatar/519b6d839ac5d2ae8bdaa85b8152da40?s=250&d=mm&r=x"
                alt="Dave">
            
        </div>
        <div>
            Written by <a target="_blank" class="text-dark" href="https://www.davelms.co.uk">Dave</a> on
            <span class="post-date"><time class="post-date"
                    datetime="2020-06-07">07 Jun 2020</time></span>
            
        </div>
    </div>
    
</div>

<!-- Adsense under title if enabled from _config.yml (change your pub id and slot) -->


<!-- Featured Image -->

<div class="entry-featured-image">
    
    <img class="featured-image "
        src="/assets/images/build-a-docker-image-using-maven-and-spring-boot/1_RWc78aUjHJZp41lMxnFdyw.png"
        alt="Build a Docker image using Maven and Spring Boot">
    
    
</div>


<!-- Subtitle -->

<div class="article-post">
    <h2 class="subtitle"> This tutorial will introduce three techniques for building a Spring Boot java application into a Docker image using Maven. </h2>
</div>


<!-- Content -->
<!-- Post, Page Content
================================================== -->
<div class="article-post">
    <!-- Toc if any -->
    
    <!-- End Toc -->
    <p>The three approaches walked through in this article are;</p>

<ol>
  <li>
    <p>Using the integrated Spring Boot <strong>build-image</strong> goal.</p>
  </li>
  <li>
    <p>Using the <strong>jib-maven-plugin</strong> from Google.</p>
  </li>
  <li>
    <p>Using the <strong>dockerfile-maven-plugin</strong> from Spotify.</p>
  </li>
</ol>

<p>Let’s get started.</p>

<h3 id="spring-boot-application">Spring Boot application</h3>

<p>For the purpose of this demonstration we are going to use the Hello World example detailed on the <a href="https://spring.io/quickstart">Spring Boot Quickstart</a>. You can bring your own application or get started by using the source code that has been prepared for this article and can be cloned from <a href="https://github.com/davelms/medium-articles/tree/master/spring-maven-docker">GitHub</a>.</p>

<p>I’m using Java 11 and Maven 3.6.3. Build using <code>mvn package</code> and verify the application runs as expected by using <code>java -jar target/demo-application-0.0.1-SNAPSHOT.jar</code> (or just use <code>mvn spring-boot:run</code> if you prefer).</p>

<p>Assuming all went well, you should be able to hit <a href="http://localhost:8080/hello">http://localhost:8080/hello</a> in a browser to see your running Spring Boot application.</p>

<p><img src="/assets/images/build-a-docker-image-using-maven-and-spring-boot/1-6DR6j8BX1eFWURlI0TsRQ.png" alt="" /></p>

<p>Now let’s work through options to turn this into a Docker image.</p>

<h3 id="1-using-the-integrated-spring-boot-build-image-goal">#1 Using the integrated Spring Boot build-image goal</h3>

<p>Spring Boot comes pre-shipped with its own plugin for building Docker images and you don’t need to make any changes, as it’s available through the standard <em>spring-boot-starter-parent</em> that is included in your pom.xml.</p>

<p>As an added bonus, you do not need to write a Dockerfile either and the plugin takes care of Spring-recommended security, memory, and performance optimizations. But be warned; if there is a Dockerfile located within your source code repository, it will be ignored.</p>

<p>So with no further code changes necessary, simply run the command</p>

<p><code>mvn spring-boot:build-image</code></p>

<p>On completion you should see a message indicating the Docker image has been successfully created.</p>

<p><img src="/assets/images/build-a-docker-image-using-maven-and-spring-boot/1eJT00FRmP4bIC4mSpd7TBg.png" alt="" /></p>

<p>By default, you can see that Spring Boot creates the image with the <strong>artifactId</strong> as the name and the <strong>version</strong> as the tag. If you want to change these details, you can provide an extra argument on the command line as follows <code>-Dspring-boot.build-image.imageName=myrepo/myimage</code></p>

<p>Once built, we can run our new Docker image. <code>docker run -p 9090:8080 -t demo-application:0.0.1-SNAPSHOT</code> (note change of port to 9090).</p>

<p><img src="/assets/images/build-a-docker-image-using-maven-and-spring-boot/1bvLNzSa8egSmAFM-c3Nddg.png" alt="" /></p>

<h3 id="2-using-the-jib-maven-plugin-from-google">#2 Using the jib-maven-plugin from Google</h3>

<p>Jib is a Maven and Gradle plugin for creating Docker images for Java applications.</p>

<p>A benefit is that it does not require Docker to be installed locally* which can be useful for Continuous Integration / build server — the <a href="https://github.com/GoogleContainerTools/jib/tree/master/jib-maven-plugin">jib-maven-plugin</a> will build and push the image straight to the Docker registry of choice.</p>

<p>*(<em>although if you do have Docker installed, you can use it</em>).</p>

<p>Just like the native Spring Boot example, it does not require you to have written a Dockerfile. In fact, you will have noticed that we have yet to make any code changes at all beyond our initial class and pom.xml files.</p>

<p>Since we are not pushing to a Docker registry in this tutorial, we will tell Jib to use our local Docker installation by using the <code>dockerBuild</code> goal.</p>

<p>To build the Docker image, run the command</p>

<p><code>mvn compile com.google.cloud.tools:jib-maven-plugin:2.3.0:dockerBuild</code></p>

<p>On completion you should see a message indicating the Docker image has been successfully created.</p>

<p><img src="/assets/images/build-a-docker-image-using-maven-and-spring-boot/1DGJtDZ005XJRdDi_h6CcPA.png" alt="" /></p>

<p>Once built, we can run our new Docker image. <code>docker run -p 9091:8080 -t demo-application:0.0.1-SNAPSHOT</code> (note change of port to 9091).</p>

<p><img src="/assets/images/build-a-docker-image-using-maven-and-spring-boot/1hGnI3BfhnGobpZQ1JUfM3A.png" alt="" /></p>

<h3 id="3-using-the-dockerfile-maven-plugin-from-spotify">#3 Using the dockerfile-maven-plugin from Spotify</h3>

<p>The final walk through in this post is to build our Docker image using the <a href="https://github.com/spotify/dockerfile-maven">dockerfile-maven-plugin</a> from Spotify.</p>

<p>This is the first of our three approaches where we need to have a Dockerfile — for the purpose of demonstration there’s a Dockerfile ready-made in the <a href="https://github.com/davelms/medium-articles/tree/master/spring-maven-docker">GitHub repository</a>. Add your Dockerfile into your root directory alongside your pom.xml.</p>

<pre><code class="language-dockerfile">FROM adoptopenjdk/openjdk11:alpine
RUN addgroup -S spring &amp;&amp; adduser -S spring -G spring
USER spring:spring
VOLUME /tmp
ARG JAR_FILE
ADD ${JAR_FILE} /app/app.jar
EXPOSE 8080
ENTRYPOINT ["java","-Djava.security.egd=file:/dev/./urandom","-jar","/app/app.jar"]
</code></pre>

<p>Next we will add some configuration into the pom.xml, specifically <code>repository</code> <code>tag</code> and an argument for the <code>JAR_FILE</code> which you can see we reference in the Dockerfile above.</p>

<pre><code class="language-xml">&lt;plugin&gt;
  &lt;groupId&gt;com.spotify&lt;/groupId&gt;
  &lt;artifactId&gt;dockerfile-maven-plugin&lt;/artifactId&gt;
  &lt;version&gt;1.4.13&lt;/version&gt;
  &lt;executions&gt;
    &lt;execution&gt;
      &lt;id&gt;default&lt;/id&gt;
      &lt;goals&gt;
        &lt;goal&gt;build&lt;/goal&gt;
        &lt;goal&gt;push&lt;/goal&gt;
      &lt;/goals&gt;
    &lt;/execution&gt;
  &lt;/executions&gt;
  &lt;configuration&gt;
    &lt;repository&gt;${project.artifactId}&lt;/repository&gt;
    &lt;tag&gt;${project.version}&lt;/tag&gt;
    &lt;buildArgs&gt;
      &lt;JAR_FILE&gt;target/${project.build.finalName}.jar&lt;/JAR_FILE&gt;
    &lt;/buildArgs&gt;
  &lt;/configuration&gt;
&lt;/plugin&gt;
</code></pre>

<p>Run the standard command <code>mvn package</code> and on completion you should see a message indicating the Docker image has been successfully created.</p>

<p><img src="/assets/images/build-a-docker-image-using-maven-and-spring-boot/1-07uaCQjmri3koGhIxLB_g.png" alt="" /></p>

<p>Once built, we can run our new Docker image. <code>docker run -p 9092:8080 -t demo-application:0.0.1-SNAPSHOT</code> (note change of port to 9092).</p>

<p><img src="/assets/images/build-a-docker-image-using-maven-and-spring-boot/1LhDmczMUEEmzio97P5HVKw.png" alt="" /></p>

<h3 id="conclusion">Conclusion</h3>

<p>In this tutorial we walked through three techniques for using Maven plugins to build a Docker image for your Spring Boot application.</p>

<p>We walked through using <strong>Spring Boot</strong> natively, and the <strong>Jib plugin</strong> from Google, both of which will work without needing to create a Dockerfile. Finally, we looked briefly at the <strong>Dockerfile-maven plugin</strong> written by Spotify which is now mature and stable, but no longer being actively enhanced.</p>

<p><img src="/assets/images/build-a-docker-image-using-maven-and-spring-boot/1t_rYOKspAAhbRDetgDacsg.png" alt="" /></p>

<h3 id="references">References</h3>

<p>For all configuration options check out these references.</p>

<ul>
  <li>
    <p><a href="https://github.com/GoogleContainerTools/jib/tree/master/jib-maven-plugin">Google jib-maven-plugin</a></p>
  </li>
  <li>
    <p><a href="https://github.com/spotify/dockerfile-maven">Spotify dockerfile-maven plugin</a></p>
  </li>
</ul>

<h2 id="a-note-from-the-author">A note from the author</h2>

<p>Thank you for reading this article — I hope you found this article useful and I look forward to your comments and feedback.</p>

<p>Source code is available from <a href="https://github.com/davelms/medium-articles/tree/master/spring-maven-docker">GitHub</a>.</p>

<p>You can follow me on <a href="https://twitter.com/davelms">Twitter</a> and connect on <a href="https://www.linkedin.com/in/davelms/">LinkedIn</a>.</p>

</div>

<!-- Rating -->


<!-- Author Box if enabled from _config.yml -->
<!-- Author Box -->


<div class="d-flex authorbox align-items-center">
    <div class="col-md-2 mr-4 text-center">
        
        <img class="author-thumb" src="https://www.gravatar.com/avatar/519b6d839ac5d2ae8bdaa85b8152da40?s=250&d=mm&r=x" alt="Dave">
        
    </div>
    <div class="col-md-10"> 
        <a target="_blank" class="text-dark h4" href="https://www.davelms.co.uk">About Dave</a>   <a target="_blank" href="https://twitter.com/davelms" class="btn-sm"><i class="fab fa-twitter"></i></a>        
        <span class="author-description d-block mt-2">DevOps | AWS | GCP.  Editor of Goats in Trees.</span>            
    </div>
</div>



<!-- Comments if not disabled with comments: false -->
<!-- Comments
================================================== -->


<!-- Share -->
<div class="share">
    <p>
        Share
    </p>
    <ul>
        <li class="ml-1 mr-1">
            <a target="_blank" href="https://twitter.com/intent/tweet?text=Build a Docker image using Maven and Spring Boot&url=https://goatsintrees.net/build-a-docker-image-using-maven-and-spring-boot/" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                <i class="fab fa-twitter"></i>
            </a>
        </li>

        <li class="ml-1 mr-1">
            <a target="_blank" href="https://facebook.com/sharer.php?u=https://goatsintrees.net/build-a-docker-image-using-maven-and-spring-boot/" onclick="window.open(this.href, 'facebook-share', 'width=550,height=435');return false;">
                <i class="fab fa-facebook-f"></i>
            </a>
        </li>

        <li class="ml-1 mr-1">
            <a target="_blank" href="https://www.linkedin.com/shareArticle?mini=true&url=https://goatsintrees.net/build-a-docker-image-using-maven-and-spring-boot/" onclick="window.open(this.href, 'width=550,height=435');return false;">
                <i class="fab fa-linkedin-in"></i>
            </a>
        </li>

    </ul>
</div>


<!-- Related Post -->
<!-- Related Posts
================================================== -->
<div class=" related-posts ">  

    
    <h2 class="text-center mb-4">Explore more like this</h2>
    
    
    <div class="d-flex justify-content-center align-items-center">
    
    <!-- Categories -->
    
    
    <a class="smoothscroll badge badge-primary text-capitalize" href="/categories#DevOps">DevOps</a>                
    

    <!-- Tags -->  
    
                    
    <a class="smoothscroll badge badge-primary text-capitalize" href="/tags#Docker">Docker</a>               
                    
    <a class="smoothscroll badge badge-primary text-capitalize" href="/tags#Maven">Maven</a>               
                    
    <a class="smoothscroll badge badge-primary text-capitalize" href="/tags#Spring-Boot">Spring Boot</a>               
    

    </div>

    
    
    
    <div class="blog-grid-container">
        
        
            
            
        
            
        
            
            <!-- begin post -->


<div class="blog-grid-item">
    <div class="card h-100">
        <div class="maxthumb">
            <a href="/build-an-rpm-using-maven-and-spring-boot/">
                

                
                <img class="img-thumb"
                    src="/assets/images/build-an-rpm-using-maven-and-spring-boot/1_pIDTvsW1UqiYaIT0qDYQVQ.png"
                    alt="Build an RPM using Maven and Spring Boot">
                

                
            </a>
        </div>
        <div class="card-body">
            <h2 class="card-title">
                <a class="text-dark" href="/build-an-rpm-using-maven-and-spring-boot/">Build an RPM using Maven and Spring Boot</a>
                
            </h2>
            <h4 class="card-text">This tutorial will introduce a technique for building a Spring Boot java application into an RPM package using Maven</h4>
        </div>
        <div class="card-footer bg-white">
            <div class="wrapfooter">
                
                <span class="meta-footer-thumb">
                    
                    <img class="author-thumb" src="https://www.gravatar.com/avatar/519b6d839ac5d2ae8bdaa85b8152da40?s=250&d=mm&r=x"
                        alt="Dave">
                    
                </span>
                <span class="author-meta">
                    <span class="post-name"><a target="_blank"
                            href="https://www.davelms.co.uk">Dave</a></span>
                    
                    <span class="post-date">15 Jun 2020</span>
                </span>
                <div class="clearfix"></div>
            </div>
        </div>
    </div>
</div>
<!-- end post -->
            
            
            
        
        
        
            
            
        
            
        
            
        
        
        
            
            
        
            
        
            
            <!-- begin post -->


<div class="blog-grid-item">
    <div class="card h-100">
        <div class="maxthumb">
            <a href="/expand-ec2-boot-disk-space-without-server-downtime/">
                

                
                <img class="img-thumb"
                    src="/assets/images/expand-ec2-boot-disk-space-without-server-downtime/1_hpUDa1brRH2PBzeCn2hNIw.jpeg"
                    alt="Expand EC2 boot disk space without server downtime">
                

                
            </a>
        </div>
        <div class="card-body">
            <h2 class="card-title">
                <a class="text-dark" href="/expand-ec2-boot-disk-space-without-server-downtime/">Expand EC2 boot disk space without server downtime</a>
                
            </h2>
            <h4 class="card-text">Run out of disk on your EC2 instance? Quick guide to expanding the disk without taking your Amazon Linux server offline.</h4>
        </div>
        <div class="card-footer bg-white">
            <div class="wrapfooter">
                
                <span class="meta-footer-thumb">
                    
                    <img class="author-thumb" src="https://www.gravatar.com/avatar/519b6d839ac5d2ae8bdaa85b8152da40?s=250&d=mm&r=x"
                        alt="Dave">
                    
                </span>
                <span class="author-meta">
                    <span class="post-name"><a target="_blank"
                            href="https://www.davelms.co.uk">Dave</a></span>
                    
                    <span class="post-date">22 May 2020</span>
                </span>
                <div class="clearfix"></div>
            </div>
        </div>
    </div>
</div>
<!-- end post -->
            
            
            
        
        
        
            
            
        
            
        
            
            <!-- begin post -->


<div class="blog-grid-item">
    <div class="card h-100">
        <div class="maxthumb">
            <a href="/build-your-docker-images-automatically-when-pushing-new-code-to-github/">
                

                
                <img class="img-thumb"
                    src="/assets/images/build-your-docker-images-automatically-when-pushing-new-code-to-github/1_uB6UypHfUDHAZySPtOYSEw.png"
                    alt="Build your Docker images automatically when pushing new code to GitHub">
                

                
            </a>
        </div>
        <div class="card-body">
            <h2 class="card-title">
                <a class="text-dark" href="/build-your-docker-images-automatically-when-pushing-new-code-to-github/">Build your Docker images automatically when pushing new code to GitHub</a>
                
            </h2>
            <h4 class="card-text">In this tutorial, we will explore two techniques to automatically build and publish Docker images to Docker Hub every time you push new code into your GitHub source repository.</h4>
        </div>
        <div class="card-footer bg-white">
            <div class="wrapfooter">
                
                <span class="meta-footer-thumb">
                    
                    <img class="author-thumb" src="https://www.gravatar.com/avatar/519b6d839ac5d2ae8bdaa85b8152da40?s=250&d=mm&r=x"
                        alt="Dave">
                    
                </span>
                <span class="author-meta">
                    <span class="post-name"><a target="_blank"
                            href="https://www.davelms.co.uk">Dave</a></span>
                    
                    <span class="post-date">10 May 2020</span>
                </span>
                <div class="clearfix"></div>
            </div>
        </div>
    </div>
</div>
<!-- end post -->
            
            
                
        </div>        
</div>

<!-- Review with LD-JSON, adapt it for your needs if you like, but make sure you test the generated HTML source code first: 
https://search.google.com/structured-data/testing-tool/u/0/
================================================== -->

            </div>

            
            <!-- Newsletter
    ================================================== -->
            <div class="newsletter text-center">
                <span class="h4"><img src="/assets/images/goat-logo.png" class="newsletter-logo"
                        alt="Goats in Trees"> &nbsp; Never miss a <b>story</b> from us, subscribe to our
                    newsletter</span>
                <form action="https://goatsintrees.us8.list-manage.com/subscribe/post?u=f1ba23fce94cc889510e995fd&amp;id=b045064b1d" method="post" name="mc-embedded-subscribe-form"
                    class="wj-contact-form validate" target="_blank" novalidate>
                    <div class="mc-field-group d-inline-flex">
                        <input type="email" placeholder="Your e-mail" name="EMAIL" class="required email" id="mce-EMAIL"
                            autocomplete="on" required>
                        <input type="submit" value="Subscribe" name="subscribe" class="heart">
                    </div>
                </form>
            </div>
            

        </div>

        <!-- Begin Footer
================================================== -->
        <footer class="footer">
            <div class="container">
                <div class="row">
                    <div class="col-md-6 col-sm-12 text-center text-lg-left">
                        Copyright © 2020 Goats in Trees
                    </div>
                </div>
            </div>
        </footer>
        <!-- End Footer
================================================== -->

    </div> <!-- /.site-content -->

    <!-- Scripts (if you need bootstrap.js, please add it yourself. I didn't use it for performance reasons, it was not needed in this theme)
================================================== -->

    <script src="/assets/js/prism.js"></script>

    <script src="/assets/js/theme.js"></script>

    

    
    <script id="dsq-count-scr" src="//demowebsite.disqus.com/count.js"></script>
    

</body>

</html>